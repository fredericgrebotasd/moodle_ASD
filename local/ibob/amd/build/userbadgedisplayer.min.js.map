{"version":3,"sources":["../src/userbadgedisplayer.js"],"names":["define","$","ModalFactory","ModalEvents","templates","ajax","init","on","elem","promises","call","methodname","args","badgeid","data","done","response","returnfunc","fail","ex","alert","returnjson","trigger","id","modal","create","title","body","render","countOtherVisibleModals","getRoot","hidden","destroy","show","removeClass","addClass"],"mappings":"AAAAA,OAAM,iCAAC,CACH,QADG,CAEH,oBAFG,CAGH,mBAHG,CAIH,gBAJG,CAKH,WALG,CAAD,CAMH,SACCC,CADD,CAECC,CAFD,CAGCC,CAHD,CAICC,CAJD,CAKCC,CALD,CAMD,CACE,MAAO,CACHC,IAAI,CAAE,eAAW,CACbL,CAAC,CAAC,aAAD,CAAD,CAAiBM,EAAjB,CAAoB,OAApB,CAA6B,UAAW,IAChCC,CAAAA,CAAI,CAAGP,CAAC,CAAC,IAAD,CADwB,CAEhCQ,CAAQ,CACRJ,CAAI,CAACK,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,kCADL,CAEPC,IAAI,CAAE,CAACC,OAAO,CAAEL,CAAI,CAACM,IAAL,CAAU,IAAV,CAAV,CAFC,CAAD,CAAV,CAHgC,CAOpCL,CAAQ,CAAC,CAAD,CAAR,CAAYM,IAAZ,CAAiB,SAAUC,CAAV,CAAoB,CACjCC,CAAU,CAACD,CAAD,CACb,CAFD,EAEGE,IAFH,CAEQ,SAASC,CAAT,CAAY,CAChBC,KAAK,CAAC,WAAWD,CAAZ,CACR,CAJD,EAMA,QAASF,CAAAA,CAAT,CAAoBI,CAApB,CAA+B,IAEvBC,CAAAA,CAAO,CAAGrB,CAAC,CAAC,UAAUoB,CAAU,CAACE,EAAtB,CAFY,CAGvBC,CAAK,CAAEtB,CAAY,CAACuB,MAAb,CAAoB,CAC3BC,KAAK,qBADsB,CAE3BC,IAAI,CAAEvB,CAAS,CAACwB,MAAV,CAAiB,+BAAjB,CAAkDP,CAAlD,CAFqB,CAApB,CAGRC,CAHQ,EAILP,IAJK,CAIA,SAASS,CAAT,CAAgB,CAClB,GAAsC,CAAnC,EAAAA,CAAK,CAACK,uBAAN,EAAH,CAAwC,CACpCL,CAAK,CAACM,OAAN,GAAgBvB,EAAhB,CAAmBJ,CAAW,CAAC4B,MAA/B,CAAuC,UAAY,CAC5CP,CAAK,CAACQ,OAAN,EACF,CAFL,CAIH,CACDR,CAAK,CAACS,IAAN,GACAT,CAAK,CAACM,OAAN,GAAgBI,WAAhB,CAA4B,MAA5B,EAAoCC,QAApC,CAA6C,MAA7C,CAEJ,CAdM,CAed,CACJ,CAhCD,CAiCH,CAnCE,CAqCV,CAlDK,CAAN","sourcesContent":["define([\n    'jquery',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/templates',\n    'core/ajax',\n], function(\n    $,\n    ModalFactory,\n    ModalEvents,\n    templates,\n    ajax,\n) {\n    return {\n        init: function() {\n            $(\".ibob-badge\").on(\"click\", function() {\n                var elem = $(this);\n                var promises =\n                    ajax.call([{\n                        methodname: 'local_ibob_detail_badge_function',\n                        args: {badgeid: elem.data(\"id\")},}\n                    ]);\n                promises[0].done(function (response) {\n                    returnfunc(response);\n                }).fail(function(ex){\n                    alert('error : '+ex);\n                });\n\n                function returnfunc(returnjson){\n                    var modalTitle = 'Détail du badge';\n                    var trigger = $('#badge_'+returnjson.id);\n                    var modal= ModalFactory.create({\n                        title: modalTitle,\n                        body: templates.render('local_ibob/userbadgedisplayer', returnjson),\n                    }, trigger)\n                         .done(function(modal) {\n                             if(modal.countOtherVisibleModals() == 0){\n                                 modal.getRoot().on(ModalEvents.hidden, function () {\n                                        modal.destroy();\n                                     }\n                                 );\n                             }\n                             modal.show();\n                             modal.getRoot().removeClass('hide').addClass('show');\n                             // pour éviter la création de plusieurs modal\n                        });\n                }\n            });\n        }\n    };\n});"],"file":"userbadgedisplayer.min.js"}